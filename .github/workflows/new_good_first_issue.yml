name: Discord Notification - New Issue

on:
  issues:
    types: [opened]

jobs:
  send_notification:
    name: Send Discord Notification
    runs-on: ubuntu-latest
    steps:
      - name: Check Labels
        id: check_labels
        run: echo ::set-output name=has_good_first_issue::${{ contains(github.event.issue.labels.*.name, 'good first issue') }}
      
      - name: Notify Discord
        if: ${{ steps.check_labels.outputs.has_good_first_issue == 'true' }}
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
          ISSUE_URL: ${{ github.event.issue.html_url }}
          ISSUE_TITLE: ${{ github.event.issue.title }}
        run: |
          curl -X POST -H "Content-Type: application/json" -d "{\"embeds\": [{\"title\": \"ðŸŽ‰ New Issue Alert!\", \"description\": \"ðŸ“¢ Attention new contributors! This new issue might be just up your alley.\n\nIssue Name: **$ISSUE_TITLE**\nIssue Link: $ISSUE_URL\", \"color\": 16750848}]}" $DISCORD_WEBHOOK
            